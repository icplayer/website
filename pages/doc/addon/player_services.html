{% extends "base.html" %}

{% block content %}

<h1>Player Services</h1>

<p>
	PlayerServices can be used to call a function on player runtime
</p>

<h3>PlayerServices type</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>getPresentation()</td>
        <td>
        	Return object which represents a presentation. 
        	This object implements several functions related to accessing the presentation 
        	and its pages.
        </td>
    </tr>
    <tr>
        <td>getCurrentPageIndex()</td>
        <td>Return index of a current page.</td>
    </tr>
    <tr>
        <td>getCommands()</td>
        <td>Return object which implements different commands you can call from your addon.</td>
    </tr>
    <tr>
        <td>getEventBus()</td>
        <td>Return object which implements event bus.</td>
    </tr>
    <tr>
        <td>getScore()</td>
        <td>Return object which implements commands for accessing the player score.</td>
    </tr>
    <tr>
        <td>getModule(moduleID)</td>
        <td>Return module presenter based on the given ID.</td>
    </tr>
    <tr>
        <td>getTextParser()</td>
        <td>Return object which is a parser for text elements like definition links.</td>
    </tr>
    <tr>
        <td>getStaticFilesPath()</td>
        <td>Returns path to static files included with the player.</td>
    </tr>
    <tr>
        <td>isBook()</td>
        <td>Returns true is player is in book mode (shows 2 pages).</td>
    </tr>
    <tr>
        <td>hasCover()</td>
        <td>Returns true if first page is shown always as single page.</td>
    </tr>
</table>

    
<h3>Presentation type</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>getPageCount()</td>
        <td>Return number of pages.</td>
    </tr>
    <tr>
        <td>getPage(index)</td>
        <td>Return page at given index.</td>
    </tr>
    <tr>
        <td>getTableOfContents()</td>
        <td>
        	Return hierarchical table of contents which consists of Chapters and Pages.
        	Chapter has the following methods:
        	<ul>
        		<li>type - "chapter"</li>
        		<li>getName() - Chapter name</li>
        		<li>size() - number of chapter nodes</li>
        		<li>get(index) - get node (Chapter or Page)</li>
        	</ul>
        	Page has the following methods:
        	<ul>
        		<li>type - "page"</li>
        		<li>getName() - Page name</li>
        		<li>getBaseURL() - URL base</li>
        		<li>isReportable() - Return true if page is reportable</li>
        	</ul>
        </td>
    </tr>
</table>
    
<h3>Page type</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>getName()</td>
        <td>Return page name.</td>
    </tr>
    <tr>
        <td>getBaseURL()</td>
        <td>Return page base URL with slash '/' at the end.</td>
    </tr>
    <tr>
        <td>isReportable()</td>
        <td>Return true if page contains should be included in lesson report.</td>
    </tr>
</table>

    
<h3>Commands type</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>executeEventCode(code)</td>
        <td>Send the script code to be executed by player</td>
    </tr>
    <tr>
        <td>gotoPage(name)</td>
        <td>Go to page with a given name.</td>
    </tr>
    <tr>
        <td>gotoPageIndex(index)</td>
        <td>Go to page at given index.</td>
    </tr>
    <tr>
        <td>getTimeElapsed()</td>
        <td>Returns time in seconds elapsed form the start of the lesson session.</td>
    </tr>
</table>
    

<h3>EventBus</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>addEventListener(event_name, listener)</td>
        <td>Register the listener for a specific event. Listener is the object which implements:
                 onEventReceived(eventName, eventData) function.
                 <br/>
                 <ul>
                      <li> eventName - event name</li>
                      <li> eventData - an array with event data</li>
                  </ul>
        </td>
    </tr>
    <tr>
        <td>sendEvent('ItemSelected', data);</td>
        <td>Send event
                 <br/>
                 <ul>
                      <li> eventName - event name</li>
                      <li> eventData - an array with event data</li>
                  </ul>
        </td>
    </tr>
</table>
    

<h3>Score</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>getMaxScore()</td>
        <td>
         Return max score for the whole presentation
        </td>
    </tr>
    <tr>
        <td>getTotalScore()</td>
        <td>
          Return score calculated for all opened pages.
        </td>
    </tr>
    <tr>
        <td>getPageScore(pageName)</td>
        <td>
          Return score for a given page. The score is hashmap with values:
              <ul>
                 <li>score - actual score</li>
                 <li>maxScore - max page score</li>
                 <li>checkCount - how many times the check button was pressed on this page</li>
                 <li>mistakeCount - total number of shown errors</li>
        </td>
    </tr>
    <tr>
        <td>getArchivedPageScore(pageName)</td>
        <td>
          Depending on content this function returns firsts or last score for the given page.
              <ul>
                 <li>score - actual score</li>
                 <li>maxScore - max page score</li>
                 <li>checkCount - how many times the check button was pressed on this page</li>
                 <li>mistakeCount - total number of shown errors</li>
        </td>
    </tr>
</table>
    
                                             
                                          
<h3>TextParser</h3>
<table class="table table-bordered">
    <tr>
        <th>Function</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>parse(text)</td>
        <td>
         Parse given text and replace definition \def{word} with links
        </td>
    </tr>
    <tr>
        <td>connectLinks(element);</td>
        <td>
          Connect all definition links to event bus. Each link will send Definition event.
        </td>
    </tr>
</table>
    
                                             
                                                     
{% endblock %}
